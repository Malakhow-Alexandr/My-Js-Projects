{"mappings":"iiBAAAA,EAAA,SCAA,IAAAC,EAAAD,EAAA,S,aAAeE,ECAZ,W,sBDAkBC,I,aAEjBC,KAAKC,YAAc,GACnBD,KAAKE,KAAO,C,iBAGdC,IAAA,gB,MAAA,W,WAOE,OAAOC,MACL,GAAiBC,OAPF,qCAOH,OAA0CA,OAArCL,KAAKC,YAAY,sBAA8BI,OAAVL,KAAKE,KAAK,eANlD,CACdI,QAAS,CACPC,cAAe,sCAOhBC,MAAK,SAAAC,GACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAE3B,OAAOH,EAASI,M,IAEjBL,MAAK,SAAAM,GAEJ,OADAC,EAAKC,gBACEF,EAAKG,Q,OAIlBd,IAAA,gB,MAAA,WACEH,KAAKE,MAAQ,C,IAGfC,IAAA,Y,MAAA,WACEH,KAAKE,KAAO,C,IAEVC,IAAA,Q,IAAJ,WACE,OAAOH,KAAKkB,K,MAGd,SAAUC,GACRnB,KAAKC,YAAckB,C,OCzCpB,GFGGC,EAAO,CACXC,WAAYC,SAASC,cAAc,mBACnCC,kBAAmBF,SAASC,cAAc,0BAC1CE,YAAaH,SAASC,cAAc,8BAGhCG,EAAiB,IAAI5B,EAmC3B,SAAS6B,EAAqBV,GAC5BG,EAAKI,kBAAkBI,mBACrB,YACoBX,EAlBnBY,KACC,SAAAC,G,IAAGC,EAAMD,EAANC,OAAQC,EAAKF,EAALE,MAAOC,EAAWH,EAAXG,YAAaC,EAAGJ,EAAHI,IAAKC,EAAUL,EAAVK,W,MAAiB,gEAGpB9B,OAFJ6B,EAAI,sGAEoB7B,OAApB8B,EAAW,WACf9B,OADwB4B,EAAY,mEAEzB5B,OADX2B,EAAM,uDAED3B,OADM0B,EAAO,gDACD1B,OAAZ4B,EAAY,4C,IAK/CG,KAAK,I,CA9BVhB,EAAKC,WAAWgB,iBAAiB,UAGjC,SAAkBC,GAChBA,EAAMC,iBACNb,EAAeR,MAAQoB,EAAME,cAActB,MAAMuB,MAEjDf,EAAegB,YAEfhB,EAAeiB,gBAAgBnC,KAAKmB,E,IARtCP,EAAKK,YAAYY,iBAAiB,SAUlC,WACEO,QAAQC,IAAI,QACZnB,EAAeiB,cAAchB,E","sources":["src/js/25-pagination.js","src/js/25-Fetch-Api-class.js","<<jsx-config-pragma.js>>"],"sourcesContent":["import BSN from 'bootstrap.native';\nimport NewsApiService from './25-Fetch-Api-class';\n\nconst refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  articlesContainer: document.querySelector('.js-articles-container'),\n  loadMoreBtn: document.querySelector('[data-action=\"load-more\"]'),\n};\n\nconst newsApiService = new NewsApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction onSearch(event) {\n  event.preventDefault();\n  newsApiService.query = event.currentTarget.query.value;\n\n  newsApiService.resetPage();\n\n  newsApiService.fetchArticles().then(appendArticlesMarkup);\n}\nfunction onLoadMore() {\n  console.log('wtf?')\n  newsApiService.fetchArticles(appendArticlesMarkup);\n}\n\nfunction renderArticleMarkup(arr) {\n  return arr\n    .map(\n      ({ author, title, description, url, urlToImage }) => `<li class=\"article__item\">\n  <a class=\"article__link\" href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\">\n    <article>\n      <img class=\"article__img\" src=\"${urlToImage}\" alt=\"${description}\" width=\"240\" height=\"140\"/>\n      <h2 class=\"article__title\">${title}</h2>\n      <p class=\"article__author\">Posted by: ${author}</p>\n      <p class=\"article__description\">${description}</p>\n    </article>\n  </a>\n  </li>\n  `)\n    .join('');\n}\n\nfunction appendArticlesMarkup(articles) {\n  refs.articlesContainer.insertAdjacentHTML(\n    'beforeend',\n    renderArticleMarkup(articles)\n  );\n}\n\nfunction clearArticlesContainer(){\n  refs.articlesContainer.innerHTML = '';\n}\n","export default class NewsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchArticles() {\n    const BASE_URL = 'https://newsapi.org/v2/everything/';\n    const options = {\n      headers: {\n        Authorization: 'b55255e13e7549a6a39768fc375a1a1a',\n      },\n    };\n    return fetch(\n      `${BASE_URL}?q=${this.searchQuery}&language=en&page=${this.page}&pageSize=5`,\n      options\n    )\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.statusText);\n        }\n        return response.json();\n      })\n      .then(data => {\n        this.incrementPage()\n        return data.articles;\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n  get query() {\n    return this.query;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n",null],"names":["parcelRequire","$8MBJY","$081c847fe5026359$export$2e2bcd8739ae039","NewsApiService","this","searchQuery","page","key","fetch","concat","headers","Authorization","then","response","ok","Error","statusText","json","data","_this","incrementPage","articles","query","newQuery","$a7224828c8c14078$var$refs","searchForm","document","querySelector","articlesContainer","loadMoreBtn","$a7224828c8c14078$var$newsApiService","$a7224828c8c14078$var$appendArticlesMarkup","insertAdjacentHTML","map","param","author","title","description","url","urlToImage","join","addEventListener","event","preventDefault","currentTarget","value","resetPage","fetchArticles","console","log"],"version":3,"file":"25-pagination.77613fdf.js.map"}
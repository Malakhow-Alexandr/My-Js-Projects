{"mappings":"YAAA,IAAMA,EAAO,CACXC,WAAYC,SAASC,cAAc,oBACnCC,UAAWF,SAASC,cAAc,wBAClCE,OAAQH,UA2CP,SAASI,EAASC,EAAMC,GACtBD,EAAKE,YAAcD,C,CAxCxBR,EAAKC,WAAWS,iBAAiB,UAEjC,SAAqBC,G,kBAYjB,IAAMJ,EAAOP,EAAKI,UAAUQ,SAASC,GACrCN,EAAKE,YAAc,GA4BpB,SAAuBK,EAAOC,EAAKC,EAAMC,GACvC,IAAMC,EAASC,KAAKD,SAAWJ,EAW/B,OATgB,IAAIM,SAAQ,SAACC,EAASC,GACpCC,YAAW,WACLL,EACFG,EAAQN,GAERO,EAAON,E,GAERC,E,IArCNO,CAAcC,OAAOX,GAAQ,KAAQ,KAlB3B,KAkByCD,EAAI,KACjDa,MAAK,SAAAC,GACJrB,EAASC,EAAMoB,GACfC,EAAaC,KAAKF,E,IAEnBG,OAAM,SAAAH,GACLrB,EAASC,EAAMoB,GACfI,EAAYF,KAAKF,E,IAElBK,SAAQ,WACHnB,IAAMoB,EAAiB,IACzBC,EAAMC,UAAW,GAEfP,EAAaQ,SAAWH,GACxBF,EAAYK,SAAWH,IAEvBI,QAAQC,IAAI,kB,KA7BzB3B,EAAM4B,iBACN,IAAMX,EAAe,GACfG,EAAc,GACdE,EAAiBjC,EAAKI,UAAUQ,SAASwB,OAI3CI,EAAA7B,EAAM8B,cAAcC,SAFb5B,EAEP0B,EAFF1B,MAAS6B,MACTT,EACEM,EADFN,MAGFA,EAAMC,UAAW,EACjB,IAAK,IAAIS,EAAI,EAAGA,EAAIX,EAAgBW,GAAK,EAACC,EAAAD,E","sources":["src/js/20-promises-casino.js"],"sourcesContent":["const refs = {\n  formCasino: document.querySelector('.js-casino-start'),\n  container: document.querySelector('.js-casino-container'),\n  strBtn: document,\n};\nconst delay = 600;\n\nrefs.formCasino.addEventListener('submit', onStartGame);\n\nfunction onStartGame(event) {\n  event.preventDefault();\n  const goodSmileArr = [];\n  const badSmileArr = [];\n  const childrenLength = refs.container.children.length;\n  const {\n    level: { value: level },\n    start,\n  } = event.currentTarget.elements;\n\n  start.disabled = true;\n  for (let i = 0; i < childrenLength; i += 1) {\n    const item = refs.container.children[i];\n    item.textContent = '';\n    createPromise(Number(level), 'ðŸ¤‘', 'ðŸ˜°', delay * (i + 0.5))\n      .then(response => {\n        markFild(item, response);\n        goodSmileArr.push(response);\n      })\n      .catch(response => {\n        markFild(item, response);\n        badSmileArr.push(response);\n      })\n      .finally(() => {\n        if (i === childrenLength - 1) {\n          start.disabled = false;\n          const result =\n            goodSmileArr.length === childrenLength ||\n            badSmileArr.length === childrenLength;\n          if (result) {\n            console.log('you are winner');\n          }\n        }\n      });\n  }\n}\n\nfunction markFild(item, smile) {\n  item.textContent = smile;\n}\n\nfunction createPromise(level, win, lose, delay) {\n  const random = Math.random() > level;\n\n  const promise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (random) {\n        resolve(win);\n      } else {\n        reject(lose);\n      }\n    }, delay);\n  });\n  return promise;\n}\n"],"names":["$5cc986fe68ff58b3$var$refs","formCasino","document","querySelector","container","strBtn","$5cc986fe68ff58b3$var$markFild","item","smile","textContent","addEventListener","event","children","i","level","win","lose","delay1","random","Math","Promise","resolve","reject","setTimeout","$5cc986fe68ff58b3$var$createPromise","Number","then","response","goodSmileArr","push","catch","badSmileArr","finally","childrenLength","start","disabled","length","console","log","preventDefault","_elements","currentTarget","elements","value","i1","_loop"],"version":3,"file":"20-promises-casino.825888d3.js.map"}
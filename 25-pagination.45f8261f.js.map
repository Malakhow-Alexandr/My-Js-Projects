{"mappings":"oeAAAA,EAAA,SAGA,MAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,mBACnCC,kBAAmBF,SAASC,cAAc,0BAC1CE,YAAaH,SAASC,cAAc,8BAGhCG,EAAiB,ICTR,MAMbC,gBAOE,OAAOC,MACL,wCAAiBC,KAAKC,gCAAgCD,KAAKE,kBAN7C,CACdC,QAAS,CACPC,cAAe,sCAOhBC,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAE3B,OAAOH,EAASI,MAAM,IAEvBL,MAAKM,IACJX,KAAKY,gBACED,EAAKE,W,CAIlBD,gBACEZ,KAAKE,MAAQ,C,CAGfY,YACEd,KAAKE,KAAO,C,CAEVa,YACF,OAAOf,KAAKe,K,CAGVA,UAAMC,GACRhB,KAAKC,YAAce,C,CAxCrBC,cACEjB,KAAKC,YAAc,GACnBD,KAAKE,KAAO,C,GDyChB,SAASgB,EAAqBL,GAC5BtB,EAAKI,kBAAkBwB,mBACrB,YACoBN,EAlBnBO,KACC,EAACC,OAAEA,EAAMC,MAAEA,EAAKC,YAAEA,EAAWC,IAAEA,EAAGC,WAAEA,KAAiB,gEACxBD,sGAEIC,WAAoBF,mEACxBD,uDACWD,gDACNE,+CAKnCG,KAAK,I,CA9BVnC,EAAKC,WAAWmC,iBAAiB,UAGjC,SAAkBC,GAChBA,EAAMC,iBACNhC,EAAekB,MAAQa,EAAME,cAAcf,MAAMgB,MAEjDlC,EAAeiB,YAEfjB,EAAeC,gBAAgBO,KAAKa,E,IARtC3B,EAAKK,YAAY+B,iBAAiB,SAUlC,WACEK,QAAQC,IAAI,QACZpC,EAAeC,cAAcoB,E","sources":["src/js/25-pagination.js","src/js/25-Fetch-Api-class.js"],"sourcesContent":["import BSN from 'bootstrap.native';\nimport NewsApiService from './25-Fetch-Api-class';\n\nconst refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  articlesContainer: document.querySelector('.js-articles-container'),\n  loadMoreBtn: document.querySelector('[data-action=\"load-more\"]'),\n};\n\nconst newsApiService = new NewsApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction onSearch(event) {\n  event.preventDefault();\n  newsApiService.query = event.currentTarget.query.value;\n\n  newsApiService.resetPage();\n\n  newsApiService.fetchArticles().then(appendArticlesMarkup);\n}\nfunction onLoadMore() {\n  console.log('wtf?')\n  newsApiService.fetchArticles(appendArticlesMarkup);\n}\n\nfunction renderArticleMarkup(arr) {\n  return arr\n    .map(\n      ({ author, title, description, url, urlToImage }) => `<li class=\"article__item\">\n  <a class=\"article__link\" href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\">\n    <article>\n      <img class=\"article__img\" src=\"${urlToImage}\" alt=\"${description}\" width=\"240\" height=\"140\"/>\n      <h2 class=\"article__title\">${title}</h2>\n      <p class=\"article__author\">Posted by: ${author}</p>\n      <p class=\"article__description\">${description}</p>\n    </article>\n  </a>\n  </li>\n  `)\n    .join('');\n}\n\nfunction appendArticlesMarkup(articles) {\n  refs.articlesContainer.insertAdjacentHTML(\n    'beforeend',\n    renderArticleMarkup(articles)\n  );\n}\n\nfunction clearArticlesContainer(){\n  refs.articlesContainer.innerHTML = '';\n}\n","export default class NewsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchArticles() {\n    const BASE_URL = 'https://newsapi.org/v2/everything/';\n    const options = {\n      headers: {\n        Authorization: 'b55255e13e7549a6a39768fc375a1a1a',\n      },\n    };\n    return fetch(\n      `${BASE_URL}?q=${this.searchQuery}&language=en&page=${this.page}&pageSize=5`,\n      options\n    )\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.statusText);\n        }\n        return response.json();\n      })\n      .then(data => {\n        this.incrementPage()\n        return data.articles;\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n  get query() {\n    return this.query;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n"],"names":["parcelRequire","$fd15c3b6ad8a6776$var$refs","searchForm","document","querySelector","articlesContainer","loadMoreBtn","$fd15c3b6ad8a6776$var$newsApiService","fetchArticles","fetch","this","searchQuery","page","headers","Authorization","then","response","ok","Error","statusText","json","data","incrementPage","articles","resetPage","query","newQuery","constructor","$fd15c3b6ad8a6776$var$appendArticlesMarkup","insertAdjacentHTML","map","author","title","description","url","urlToImage","join","addEventListener","event","preventDefault","currentTarget","value","console","log"],"version":3,"file":"25-pagination.45f8261f.js.map"}
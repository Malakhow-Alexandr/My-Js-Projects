{"mappings":"oeAAAA,EAAA,S,iBAKA,MAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,mBACnCC,gBAAiBF,SAASC,cAAc,yBAGpCE,EAAc,ICVL,MAMbC,QAAQC,GACN,MAAMC,EAAO,GAKb,OAJAA,EAAKC,QAAUP,SAASC,cAAcI,GACtCC,EAAKE,MAAQF,EAAKC,QAAQN,cAAc,UACxCK,EAAKG,QAAUH,EAAKC,QAAQN,cAAc,YAEnCK,C,CAGTI,SACEC,KAAKL,KAAKC,QAAQK,UAAW,EAC7BD,KAAKL,KAAKE,MAAMK,YAAc,YAC9BF,KAAKL,KAAKG,QAAQK,UAAUC,IAAI,Y,CAGlCC,UACEL,KAAKL,KAAKC,QAAQK,UAAW,EAC7BD,KAAKL,KAAKE,MAAMK,YAAc,aAC9BF,KAAKL,KAAKG,QAAQK,UAAUG,OAAO,Y,CAGrCC,OACEP,KAAKL,KAAKC,QAAQO,UAAUG,OAAO,Y,CAErCE,OACER,KAAKL,KAAKC,QAAQO,UAAUC,IAAI,Y,CA9BlCK,aAAYf,SAAEA,EAAQgB,OAAEA,GAAS,IAC/BV,KAAKL,KAAOK,KAAKP,QAAQC,GAEzBgB,GAAUV,KAAKQ,M,GDMiB,CAClCd,SAAU,4BACVgB,QAAQ,IAGJC,EAAiB,IEfR,MAMbC,WAIE,OAAOC,MACL,qEAAgCb,KAAKc,mCAAmCd,KAAKe,oBAE5EC,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAE3B,OAAOH,EAASI,MAAM,IAEvBL,MAAKM,IACJtB,KAAKuB,gBACED,EAAKE,O,CAIlBD,gBACEvB,KAAKe,MAAQ,C,CAGfU,YACEzB,KAAKe,KAAO,C,CAEVW,YACF,OAAO1B,KAAK0B,K,CAGVA,UAAMC,GACR3B,KAAKc,YAAca,C,CApCrBlB,cACET,KAAKc,YAAc,GACnBd,KAAKe,KAAO,C,GFiDhB,SAASa,IACPpC,EAAYa,UACZM,EAAeC,WAAWI,MAAKM,IAC7B,GAAoB,IAAhBA,EAAKO,OAGP,OAFAC,EAAAC,OAAOC,QAAQ,wCACfxC,EAAYgB,OAQlB,IAAyByB,IALLX,EAMlBnC,EAAKI,gBAAgB2C,mBAAmB,YAA6BD,EAvBlEE,KACC,EAAGC,cAAeC,EAAGC,KAAEA,KAAW,sEACED,WAAaC,+CAIlDC,KAAK,KAYN/C,EAAYO,QAAQ,G,CA5CxBZ,EAAKC,WAAWoD,iBAAiB,UAGjC,SAAkBC,GAChBA,EAAMC,iBAEN,MAAMC,EAAaF,EAAMG,cAAclB,MAAMmB,MAI7C,GAFAlC,EAAee,MAAQiB,GAElBA,EAAWG,OAEd,YADAhB,EAAAC,OAAOC,QAAQ,oCA0CjB7C,EAAKI,gBAAgBwD,UAAY,GApCjCvD,EAAYe,OAEZI,EAAec,YAEfG,G,IApBFpC,EAAYG,KAAKC,QAAQ4C,iBAAiB,QAASZ","sources":["src/js/25-pagination.js","src/js/25-load-more-btn.js","src/js/25-Fetch-Api-class.js"],"sourcesContent":["import BSN from 'bootstrap.native';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport NewsApiService from './25-Fetch-Api-class';\nimport LoadMoreBtn from './25-load-more-btn';\n\nconst refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  imagesContainer: document.querySelector('.js-images-container'),\n};\n\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: '[data-action=\"load-more\"]',\n  hidden: true,\n});\n\nconst newsApiService = new NewsApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nloadMoreBtn.refs.showBtn.addEventListener('click', fetchImages);\n\nfunction onSearch(event) {\n  event.preventDefault();\n\n  const inputValue = event.currentTarget.query.value;\n\n  newsApiService.query = inputValue;\n\n  if (!inputValue.trim()) {\n    Notify.failure('Please enter somthing to search!');\n    return;\n  }\n\n  clearImgContainer();\n\n  loadMoreBtn.show();\n\n  newsApiService.resetPage();\n\n  fetchImages();\n}\n\nfunction renderImgMarkup(arr) {\n  return arr\n    .map(\n      ({ largeImageURL: img, tags }) => `<li class=\"images__item\">\n      <img class=\"images__picture\" src=\"${img}\" alt=\"${tags}\" width=\"240\" height=\"140\"/>\n  </li>\n  `\n    )\n    .join('');\n}\n\nfunction fetchImages() {\n  loadMoreBtn.disable();\n  newsApiService.fetchImg().then(data => {\n    if (data.length === 0) {\n      Notify.failure('Nothing found for your request!');\n      loadMoreBtn.hide();\n      return;\n    }\n    appendImgMarkup(data);\n    loadMoreBtn.enable();\n  });\n}\n\nfunction appendImgMarkup(images) {\n  refs.imagesContainer.insertAdjacentHTML('beforeend', renderImgMarkup(images));\n}\n\nfunction clearImgContainer() {\n  refs.imagesContainer.innerHTML = '';\n}\n","export default class LoadMoreBtn {\n  constructor({ selector, hidden = false }) {\n    this.refs = this.getRefs(selector);\n\n    hidden && this.hide();\n  }\n  getRefs(selector) {\n    const refs = {};\n    refs.showBtn = document.querySelector(selector);\n    refs.label = refs.showBtn.querySelector('.label');\n    refs.spinner = refs.showBtn.querySelector('.spinner');\n\n    return refs;\n  }\n\n  enable() {\n    this.refs.showBtn.disabled = false;\n    this.refs.label.textContent = 'Show more';\n    this.refs.spinner.classList.add('is-hidden');\n  }\n\n  disable() {\n    this.refs.showBtn.disabled = true;\n    this.refs.label.textContent = 'Loading...';\n    this.refs.spinner.classList.remove('is-hidden');\n  }\n\n  show(){\n    this.refs.showBtn.classList.remove('is-hidden');\n  }\n  hide(){\n    this.refs.showBtn.classList.add('is-hidden');\n  }\n}\n","export default class NewsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchImg() {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const API_KEY = '32942514-6053626dad09aaaa042cf88b1'\n    \n    return fetch(\n      `${BASE_URL}?key=${API_KEY}&q=${this.searchQuery}&image-type=all&page=${this.page}&per_page=10`\n    )\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.statusText);\n        }\n        return response.json();\n      })\n      .then(data => {\n        this.incrementPage()\n        return data.hits;\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n  get query() {\n    return this.query;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n\n"],"names":["parcelRequire","$fd15c3b6ad8a6776$var$refs","searchForm","document","querySelector","imagesContainer","$fd15c3b6ad8a6776$var$loadMoreBtn","getRefs","selector","refs","showBtn","label","spinner","enable","this","disabled","textContent","classList","add","disable","remove","show","hide","constructor","hidden","$fd15c3b6ad8a6776$var$newsApiService","fetchImg","fetch","searchQuery","page","then","response","ok","Error","statusText","json","data","incrementPage","hits","resetPage","query","newQuery","$fd15c3b6ad8a6776$var$fetchImages","length","$iQIUW","Notify","failure","images","insertAdjacentHTML","map","largeImageURL","img","tags","join","addEventListener","event","preventDefault","inputValue","currentTarget","value","trim","innerHTML"],"version":3,"file":"25-pagination.b8b50b84.js.map"}
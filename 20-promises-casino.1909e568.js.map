{"mappings":"AAAA,MAAMA,EAAO,CACXC,WAAYC,SAASC,cAAc,oBACnCC,UAAWF,SAASC,cAAc,wBAClCE,OAAQH,UA2CP,SAASI,EAASC,EAAMC,GACtBD,EAAKE,YAAcD,C,CAGrB,SAASE,EAAcC,EAAOC,EAAKC,EAAMC,GACvC,MAAMC,EAASC,KAAKD,SAAWJ,EAW/B,OATgB,IAAIM,SAAQ,CAACC,EAASC,KACpCC,YAAW,KACLL,EACFG,EAAQN,GAERO,EAAON,EAAK,GAEbC,EAAM,G,CArDhBd,EAAKC,WAAWoB,iBAAiB,UAEjC,SAAqBC,GACnBA,EAAMC,iBACN,MAAMC,EAAe,GACfC,EAAc,GACdC,EAAiB1B,EAAKI,UAAUuB,SAASC,QAE7CjB,OAASkB,MAAOlB,GAAOmB,MACvBA,GACER,EAAMS,cAAcC,SAExBF,EAAMG,UAAW,EACjB,IAAK,IAAIC,EAAI,EAAGA,EAAIR,EAAgBQ,GAAK,EAAG,CAC1C,MAAM3B,EAAOP,EAAKI,UAAUuB,SAASO,GACrC3B,EAAKE,YAAc,GACnBC,EAAcyB,OAAOxB,GAAQ,KAAQ,KAlB3B,KAkByCuB,EAAI,KACjDE,MAAKC,IACJ/B,EAASC,EAAM8B,GACfb,EAAac,KAAKD,EAAS,IAE5BE,OAAMF,IACL/B,EAASC,EAAM8B,GACfZ,EAAYa,KAAKD,EAAS,IAE3BG,SAAQ,KACP,GAAIN,IAAMR,EAAiB,EAAG,CAC5BI,EAAMG,UAAW,GAEfT,EAAaI,SAAWF,GACxBD,EAAYG,SAAWF,IAEvBe,QAAQC,IAAI,iB","sources":["src/js/20-promises-casino.js"],"sourcesContent":["const refs = {\n  formCasino: document.querySelector('.js-casino-start'),\n  container: document.querySelector('.js-casino-container'),\n  strBtn: document,\n};\nconst delay = 600;\n\nrefs.formCasino.addEventListener('submit', onStartGame);\n\nfunction onStartGame(event) {\n  event.preventDefault();\n  const goodSmileArr = [];\n  const badSmileArr = [];\n  const childrenLength = refs.container.children.length;\n  const {\n    level: { value: level },\n    start,\n  } = event.currentTarget.elements;\n\n  start.disabled = true;\n  for (let i = 0; i < childrenLength; i += 1) {\n    const item = refs.container.children[i];\n    item.textContent = '';\n    createPromise(Number(level), 'ðŸ¤‘', 'ðŸ˜°', delay * (i + 0.5))\n      .then(response => {\n        markFild(item, response);\n        goodSmileArr.push(response);\n      })\n      .catch(response => {\n        markFild(item, response);\n        badSmileArr.push(response);\n      })\n      .finally(() => {\n        if (i === childrenLength - 1) {\n          start.disabled = false;\n          const result =\n            goodSmileArr.length === childrenLength ||\n            badSmileArr.length === childrenLength;\n          if (result) {\n            console.log('you are winner');\n          }\n        }\n      });\n  }\n}\n\nfunction markFild(item, smile) {\n  item.textContent = smile;\n}\n\nfunction createPromise(level, win, lose, delay) {\n  const random = Math.random() > level;\n\n  const promise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (random) {\n        resolve(win);\n      } else {\n        reject(lose);\n      }\n    }, delay);\n  });\n  return promise;\n}\n"],"names":["$5ab9ddd6067664a8$var$refs","formCasino","document","querySelector","container","strBtn","$5ab9ddd6067664a8$var$markFild","item","smile","textContent","$5ab9ddd6067664a8$var$createPromise","level","win","lose","delay1","random","Math","Promise","resolve","reject","setTimeout","addEventListener","event","preventDefault","goodSmileArr","badSmileArr","childrenLength","children","length","value","start","currentTarget","elements","disabled","i","Number","then","response","push","catch","finally","console","log"],"version":3,"file":"20-promises-casino.1909e568.js.map"}
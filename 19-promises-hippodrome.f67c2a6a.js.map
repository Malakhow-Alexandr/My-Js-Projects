{"mappings":"YAAA,IAAMA,EAAS,CACb,cACA,UACA,kBACA,aACA,aAGEC,EAAc,EACZC,EAAO,CACXC,SAAUC,SAASC,cAAc,gBACjCC,YAAaF,SAASC,cAAc,cACpCE,cAAeH,SAASC,cAAc,gBACtCG,UAAWJ,SAASC,cAAc,6BA4BpC,SAASI,EAAkBC,GACzBR,EAAKI,YAAYK,YAAcD,C,CAGjC,SAASE,EAAoBF,GAC3BR,EAAKK,cAAcI,YAAcD,C,CAQnC,SAASG,EAAIC,GACX,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3B,IAQmBC,EAAKC,EARlBC,GAQaF,EARQ,IAQHC,EARS,KAS5BE,KAAKC,MAAMD,KAAKE,UAAYJ,EAAMD,EAAM,GAAKA,IAPlDM,YAAW,WACTR,EAAQ,CAAEF,QAAOM,Q,GAChBA,E,IA5CPlB,EAAKC,SAASsB,iBAAiB,SAE/B,WACExB,GAAe,EACf,IAAMyB,EAAW1B,EAAO2B,IAAId,GAC5BJ,EAAkB,IAClBG,EAAoB,8CAMEgB,EAJPF,EAKfX,QAAQc,KAAKD,GAASE,MAAK,SAAAC,G,IAAGjB,EAAKiB,EAALjB,MAAOM,EAAIW,EAAJX,KACnCX,EAAkB,UAAsCuB,OAA1BlB,EAAM,uBAA4BkB,OAALZ,EAAK,kBAmBpE,SAA2BW,G,IAAEjB,EAAFiB,EAAEjB,MAAOM,EAATW,EAASX,KAAMa,EAAfF,EAAeG,YAClCC,EAAK,WAAkCH,OAAvBC,EAAY,aAA4BD,OAAjBlB,EAAM,aAAgBkB,OAALZ,EAAK,cACnElB,EAAKM,UAAU4B,mBAAmB,YAAaD,E,CApBvCE,CAAY,CAAEvB,QAAOM,OAAMc,YAAAjC,G,IAIrC,SAA4B2B,GAC1Bb,QAAQuB,IAAIV,GAASE,MAAK,SAAAS,GACxB3B,EAAoB,mD,IAZtB4B,CAAmBd,GAGrB,IAAwBE,C","sources":["src/js/19-promises-hippodrome.js"],"sourcesContent":["const horses = [\n  'Secretariat',\n  'Eclipse',\n  'West Australian',\n  'Flying Fox',\n  'Sebastian',\n];\n\nlet raceCounter = 0;\nconst refs = {\n  startBtn: document.querySelector('.js-race-btn'),\n  winnerField: document.querySelector('.js-winner'),\n  progressField: document.querySelector('.js-progress'),\n  tableBody: document.querySelector('.js-result-table > tbody'),\n};\n\nrefs.startBtn.addEventListener('click', onStart);\n\nfunction onStart() {\n  raceCounter += 1;\n  const promises = horses.map(run);\n  updateWinnerField('');\n  updateProgressField('üèá The race has started, no bids accepted!');\n\n  determinWinner(promises);\n  waitForAllFinished(promises);\n}\n\nfunction determinWinner(horsesP) {\n  Promise.race(horsesP).then(({ horse, time }) => {\n    updateWinnerField(`üèÅ Won ${horse}ü•á by finishing in ${time} milliseconds`);\n    updateResultTable({ horse, time, raceCounter});\n  });\n}\n\nfunction waitForAllFinished(horsesP) {\n  Promise.all(horsesP).then(result => {\n    updateProgressField('üêé the race is over. ü§ë bids are being accepted!');\n  });\n}\n\nfunction updateWinnerField(message) {\n  refs.winnerField.textContent = message;\n}\n\nfunction updateProgressField(message) {\n  refs.progressField.textContent = message;\n}\n\nfunction updateResultTable({ horse, time, raceCounter}) {\n  const tr = `<tr><td>${raceCounter}</td><td>${horse}</td><td>${time}</td></tr>`;\n  refs.tableBody.insertAdjacentHTML('beforeend', tr);\n}\n\nfunction run(horse) {\n  return new Promise((resolve, reject) => {\n    const time = getRandomTime(2000, 3500);\n\n    setTimeout(() => {\n      resolve({ horse, time });\n    }, time);\n  });\n}\n\nfunction getRandomTime(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n"],"names":["$840f0ce167c054c0$var$horses","$840f0ce167c054c0$var$raceCounter","$840f0ce167c054c0$var$refs","startBtn","document","querySelector","winnerField","progressField","tableBody","$840f0ce167c054c0$var$updateWinnerField","message","textContent","$840f0ce167c054c0$var$updateProgressField","$840f0ce167c054c0$var$run","horse","Promise","resolve","reject","min","max","time","Math","floor","random","setTimeout","addEventListener","promises","map","horsesP","race","then","param","concat","raceCounter1","raceCounter","tr","insertAdjacentHTML","$840f0ce167c054c0$var$updateResultTable","all","result","$840f0ce167c054c0$var$waitForAllFinished"],"version":3,"file":"19-promises-hippodrome.f67c2a6a.js.map"}